pipeline {
	agent any
	 
   parameters {
    string(name: 'DOCKER_PUSH_USERNAME', defaultValue: 'ramanurs', description: 'Docker group username for pushing images..')
	}
	parameters {
   string(name: 'PROJECT_NAME', defaultValue: 'petclinic1', description: 'project name for creating image..')
	}
	
	stages {
	   stage('Stage - 1'){
			steps {
			//	withCredentials([usernamePassword(credentialsId: 'ramana_dockerhub', passwordVariable: 'dockerhub_pwd', usernameVariable: 'dockerhub_user')]) {
			//		bat "echo p $dockerhub_pwd %dockerhub_pwd%'"
			//		bat "docker login -u ${dockerhub_user} -p ${dockerhub_pwd}"
			//		bat 'echo "logged in to docker hub.."'
		
				script {
					pom = readMavenPom file: 'pom.xml'
					bat "echo Project Version: ${pom.version}"
					IMAGE_NAME = "${env.DOCKER_PUSH_USERNAME}/${env.PROJECT_NAME}:${pom.version}_${env.BUILD_NUMBER}"
				}
				bat "echo Project Version1: ${pom.version}"
				bat "echo IMAGE: ${IMAGE_NAME}"
				
			//	}
			}
		}
		
	}
}